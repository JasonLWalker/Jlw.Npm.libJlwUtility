/* Jlw Utility Library 1.2.6
* Â©2012-2023 Jason L Walker 
* Build time: 06-12-2023 23:30:06
*/
function libJlwUtility(a,s){var t,e,o,i,n,r={Success:"0",Warning:"1",Info:"2",Danger:"3",Alert:"4",Redirect:"5"},l=(a=a||{}).this||this;function c(e){var a=(e||"").toLowerCase(),t=(e||"").toLowerCase();return e&&"string"==typeof e?(a.includes(".min.css")||(a=a.replace(".css",".min.css")),t.includes(".min.css")&&(t=t.replace(".min.css",".css")),0<s('link[href*="'+a+'"]').length||0<s('link[href*="'+t+'"]').length||s("head").append(s('<link rel="stylesheet" type="text/css" />').attr("href",e)),s.Deferred().resolve()):s.Deferred().fail()}function d(e,a){return e?s.Deferred().resolve:"string"==typeof a?s.getScript(a):s.Deferred().fail()}function p(e,a){return a=a||"000000000",e=(e=e||"").trim(),a.substring(0,a.length-e.length)+e}function u(e,a){var t="";a=a||"YYYY-MM-DD";try{t=e?window.moment(e).format(a):""}catch(e){}return t}function f(e){var e=s("input, select, textarea",e),a=(e.each(function(e,a){a=s(a);a.data("jlwIsDisabled",a.prop("disabled")),a.attr("disabled",!1)}),e.serializeArray()),t={};return s(a).each(function(e,a){t[a.name]&&l.serializeMultipleFieldCallback?(s.isArray(t[a.name])||(t[a.name]=[t[a.name]]),t[a.name].push(a.value)):t[a.name]=a.value}),"function"==typeof l.serializeMultipleFieldCallback&&l.serializeMultipleFieldCallback(a,t),e.each(function(e,a){a=s(a);a.prop("disabled",a.data("jlwIsDisabled"))}),t}function w(e,n){s(e).each(function(e,a){if(s.isArray(n[a.name])){var t=n[a.name],o=a.name;n[o]="";for(var i=0;i<t.length;i++)n[o]+=(n[o]?",":"")+t[i]}})}function g(t){var o=-999;return s("*").each(function(){var e=s(this),a=parseInt(e.css("z-index"),10);a&&o<a&&e!=t&&(o=a)}),o}function b(e){var a=l.getHighestZIndex(e);try{e&&(e.data("bs.modal")._backdrop.css("z-index",a+1),e.css("z-index",a+2))}catch(e){}}function m(e){var a;s&&s.fn&&s.fn.modal&&(null==e&&(e=l.language.pleaseWait),s(".h4>span",l.pleaseWaitDiv).html(e),s("button.btn-close",l.pleaseWaitDiv).off().on("click",function(){l.hidePleaseWait()}),(a=l.pleaseWaitDiv.appendTo("body")).off("hidden.bs.modal").on("hidden.bs.modal",function(){s(".modal.jlwPleaseWait").remove()}),a.off("shown.bs.modal").on("shown.bs.modal",function(){l.setModalOnTop(a)}),window.setTimeout(function(){a.modal("show")},10))}function h(){var e;s&&s.fn&&s.fn.modal&&((e=s(".jlwPleaseWait")).off("shown.bs.modal").on("shown.bs.modal",function(){e.modal("hide")}),e.modal("hide"))}function y(e,a,t,o){function i(e,a,t){window.bootbox?window.bootbox.alert({title:e,message:a,callback:function(){t&&window.location.replace(t)}}):(window.alert(a),t&&window.location.replace(t))}switch(t=(t=null==t?"info":t).toString().toLowerCase()){case"success":window.toastr&&window.toastr.success(a,e);break;case"info":window.toastr&&window.toastr.info(a,e);break;case"warning":case"danger":window.toastr&&window.toastr.warning(a,e);break;case"redirect":l.hidePleaseWait(),i(a,e);break;case"alert":l.hidePleaseWait(),i(a,e,o)}o&&"alert"!=t&&window.setTimeout(function(){window.location.replace(o)},1500)}function v(e,a,t){if(t&&401===t.status&&t.getResponseHeader){t=t.getResponseHeader("location");if(t)return t=t.replace(/ReturnUrl=[\w\W]*$/i,"ReturnUrl="+encodeURIComponent(window.location.pathname)),o(l.language.notAuthorizedTitle,l.language.notAuthorized,t),!1}if(e&&(e.ExceptionType||e.Message)){if(e.ExceptionType)switch(e.ExceptionType.toLowerCase()){case"invalidloginexception":return l.hidePleaseWait(),o(l.language.notAuthorizedTitle,l.language.notAuthorized,l.baseUrl),!0;case"invalidtokenexception":return l.hidePleaseWait(),o(e.Message,e.ExceptionMessage,l.baseUrl),!0;case"statusfailexception":case"statusinvalidinputexception":case"system.exception":case"system.data.sqlclient.sqlexception":return l.hidePleaseWait(),window.toastr&&window.toastr.error(e.ExceptionMessage,e.Message),!0;default:e.Title=e.Message,e.Message=e.ExceptionMessage}if(null!=e.MessageType&&e.MessageType.toString())switch(e.MessageType.toString().toLowerCase()){case"success":case l.messageTypes.Success:window.toastr&&window.toastr.success(e.Message,e.Title);break;case"info":case l.messageTypes.Info:window.toastr&&window.toastr.info(e.Message,e.Title);break;case"warning":case l.messageTypes.Warning:window.toastr&&window.toastr.warning(e.Message,e.Title);break;case"danger":case l.messageTypes.Danger:window.toastr&&window.toastr.error(e.Message,e.Title);break;case"redirect":case l.messageTypes.Redirect:l.hidePleaseWait(),o(e.Title,e.Message,e.RedirectUrl);break;case"alert":case l.messageTypes.Alert:l.hidePleaseWait(),o(e.Title,e.Message)}}return!1;function o(e,a,t){window.bootbox?(e=window.bootbox.alert({title:e,message:a,callback:function(){t&&window.location.replace(t)}}),l.setModalOnTop(e)):(window.alert(a),t&&window.location.replace(t))}}function T(e,a,t){var o=null,o=new RegExp("application/json","i").test(e.getResponseHeader("content-type"))?s.parseJSON(e.responseText):{Message:e.status+" - "+a+": "+t,MessageType:l.messageTypes.Danger,Title:l.language.error};l.checkAjaxMessage(o,a,e),l.hidePleaseWait()}function x(e,a,o,t){function i(e,a,t){l.checkAjaxMessage(e)||"function"==typeof o&&o(e,a,t)}return"function"!=typeof t&&(t=T),e=e+(-1===e.indexOf("?")?"?":"&")+"__="+Number(new Date),(a?s.ajax({url:e,type:"GET",contentType:"application/json",data:JSON.stringify(a),cache:!1}):s.getJSON(e)).done(i).fail(t)}function k(e,a,o,t){function i(e,a,t){l.checkAjaxMessage(e)||"function"==typeof o&&o(e,a,t)}return void 0===t&&(t=T),e=e+(-1===e.indexOf("?")?"?":"&")+"__="+Number(new Date),(a?s.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(a),cache:!1}):s.ajax({url:e,type:"POST",contentType:"application/json",cache:!1})).done(i).fail(t)}function M(t,o){var i=null;return function(){var e=this,a=arguments;clearTimeout(i),i=setTimeout(function(){t.apply(e,a)},o)}}function D(e,a){var t,o=[],i="",o=s("input:not([type=radio])",a).val("");for(t in o=s("select",a).val(""),o=s("textarea",a).val(""),o=s("input[type=checkbox]",a).val("1").prop("checked",!1),e)(o=(o=(o=s("input[name="+t+"]",a))[0]?o:s("select[name="+t+"]",a))[0]?o:s("textarea[name="+t+"]",a))[0]&&("checkbox"==o.prop("type")?(o.prop("checked",e[t]),o.data("origValue",o.val())):"radio"==o.prop("type")?(i=e[t]?e[t].toString():"",o.each(function(e,a){a=s(a);a.prop("checked",a.val()==i)})):(i=e[t]?e[t].toString():"",o.val(i.trim()),o.data("origValue",o.val())))}function z(e){s(e).each(function(e,a){try{var t=s(a).prop("id");s("#"+t).DataTable().draw(l.redrawDataTableType)}catch(e){}})}return s=s||window.jQuery,l.fireCallback=l.fireCallback||function(e){"function"==typeof e&&e()},o=e=function(){var e=a.libPaths||{};l.get=x,l.post=k,l.checkAjaxMessage=v,l.showPleaseWait=m,l.hidePleaseWait=h,l.baseUrl="",t=s('<div class="modal fade jlwPleaseWait" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-body"><div class="text-center"><button type="button" class="btn-close float-end" data-bs-dismiss="modal" aria-label="Close"></button><div class="h4"><span></span><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-info progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div></div></div></div></div></div>'),l.pleaseWaitDiv=t,l.language={pleaseWait:"Processing...",notAuthorizedTitle:"Not Logged In",notAuthorized:"Either you have not completely logged in or your session has expired. Please log in and try again.",error:"An error has occurred"},l.debounce=l.debounce||M,l.populateFormData=l.populateFormData||D,l.setModalOnTop=l.setModalOnTop||b,l.serializeFormToJson=l.serializeFormToJson||f,l.messageTypes=l.messageTypes||r,l.formatDateString=l.formatDateString||u,l.zeroPad=l.zeroPad||p,l.redrawDataTableType=l.redrawDataTableType||"full-hold",l.redrawDataTable=l.redrawDataTable||z,l.showNotification=l.showNotification||y,l.lazyLoadLibrary=l.lazyLoadLibrary||d,l.lazyLoadStyle=l.lazyLoadStyle||c,l.getHighestZIndex=l.getHighestZIndex||g,l.serializeMultipleFieldCallback=l.serializeMultipleFieldCallback||w,l.promiseInitBootstrap=l.lazyLoadLibrary(window.bootstrap&&window.bootstrap.Modal,e.Bootstrap),l.promiseInitFontAwesome=l.lazyLoadLibrary(window.FontAwesome,e.FontAwesome),l.promiseInitBootbox=l.lazyLoadLibrary(window.bootbox,e.Bootbox),l.promiseInitToastr=l.lazyLoadLibrary(window.toastr,e.Toastr),l.fireCallback(l.init),l.fireCallback(a.fnInit)},e=a.libPaths||{},void 0===s&&e.jQuery?(i=document.getElementsByTagName("head")[0],(n=document.createElement("script")).type="text/javascript",n.src=e.jQuery,n.onload=function(){s=window.jQuery,l.promiseInitJquery=s.Deferred().resolve(),l.fireCallback(o)},i.appendChild(n)):(void 0!==s&&(l.promiseInitJquery=s.Deferred().resolve()),l.fireCallback(o)),l}
