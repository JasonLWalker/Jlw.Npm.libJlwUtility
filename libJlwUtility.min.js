/* Jlw Utility Library 1.2.2
* Â©2012-2023 Jason L Walker 
* Build time: 06-12-2023 21:13:40
*/
function libJlwUtility(a,s){var t,e,i,o,n,r={Success:"0",Warning:"1",Info:"2",Danger:"3",Alert:"4",Redirect:"5"},l=(a=a||{}).this||this;function c(e,a){var t=(e||"").toLowerCase(),i=(e||"").toLowerCase();return a&&"string"==typeof a?(t.includes(".min.css")||(t=t.replace(".css",".min.css")),i.includes(".min.css")&&(i=i.replace(".min.css",".css")),0<s('link[href*="'+t+'"]').length||0<s('link[href*="'+i+'"]').length||s("head").append(s('<link rel="stylesheet" type="text/css" />').attr("href",e)),s.Deferred().resolve()):s.Deferred.fail()}function d(e,a){return e?s.Deferred().resolve:"string"==typeof a?s.getScript(a):s.Deferred().fail()}function p(e,a){return a=a||"000000000",e=(e=e||"").trim(),a.substring(0,a.length-e.length)+e}function u(e,a){var t="";a=a||"YYYY-MM-DD";try{t=e?window.moment(e).format(a):""}catch(e){}return t}function w(e){var e=s("input, select, textarea",e),a=(e.each(function(e,a){a=s(a);a.data("jlwIsDisabled",a.prop("disabled")),a.attr("disabled",!1)}),e.serializeArray()),t={};return s(a).each(function(e,a){t[a.name]&&l.serializeMultipleFieldCallback?(s.isArray(t[a.name])||(t[a.name]=[t[a.name]]),t[a.name].push(a.value)):t[a.name]=a.value}),"function"==typeof l.serializeMultipleFieldCallback&&l.serializeMultipleFieldCallback(a,t),e.each(function(e,a){a=s(a);a.prop("disabled",a.data("jlwIsDisabled"))}),t}function f(e,n){s(e).each(function(e,a){if(s.isArray(n[a.name])){var t=n[a.name],i=a.name;n[i]="";for(var o=0;o<t.length;o++)n[i]+=(n[i]?",":"")+t[o]}})}function g(t){var i=-999;return s("*").each(function(){var e=s(this),a=parseInt(e.css("z-index"),10);a&&i<a&&e!=t&&(i=a)}),i}function b(e){var a=l.getHighestZIndex(e);try{e&&(e.data("bs.modal")._backdrop.css("z-index",a+1),e.css("z-index",a+2))}catch(e){}}function y(e){var a;s&&s.fn&&s.fn.modal&&(null==e&&(e=l.language.pleaseWait),s(".h4>span",l.pleaseWaitDiv).html(e),s("button.btn-close",l.pleaseWaitDiv).off().on("click",function(){l.hidePleaseWait()}),a=l.pleaseWaitDiv.appendTo("body"),window.setTimeout(function(){a.modal("show"),a.on("hidden.bs.modal",function(){s(".jlwPleaseWait").remove()}),l.setModalOnTop(a)},10))}function m(){s&&s.fn&&s.fn.modal&&window.setTimeout(function(){0<s(".jlwPleaseWait").length&&s(".jlwPleaseWait").modal("hide")},10)}function h(e,a,t,i){function o(e,a,t){window.bootbox?window.bootbox.alert({title:e,message:a,callback:function(){t&&window.location.replace(t)}}):(window.alert(a),t&&window.location.replace(t))}switch(t=(t=null==t?"info":t).toString().toLowerCase()){case"success":window.toastr&&window.toastr.success(a,e);break;case"info":window.toastr&&window.toastr.info(a,e);break;case"warning":case"danger":window.toastr&&window.toastr.warning(a,e);break;case"redirect":l.hidePleaseWait(),o(a,e);break;case"alert":l.hidePleaseWait(),o(a,e,i)}i&&"alert"!=t&&window.setTimeout(function(){window.location.replace(i)},1500)}function v(e,a,t){if(t&&401===t.status&&t.getResponseHeader){t=t.getResponseHeader("location");if(t)return t=t.replace(/ReturnUrl=[\w\W]*$/i,"ReturnUrl="+encodeURIComponent(window.location.pathname)),i(l.language.notAuthorizedTitle,l.language.notAuthorized,t),!1}if(e&&(e.ExceptionType||e.Message)){if(e.ExceptionType)switch(e.ExceptionType.toLowerCase()){case"invalidloginexception":return l.hidePleaseWait(),i(l.language.notAuthorizedTitle,l.language.notAuthorized,l.baseUrl),!0;case"invalidtokenexception":return l.hidePleaseWait(),i(e.Message,e.ExceptionMessage,l.baseUrl),!0;case"statusfailexception":case"statusinvalidinputexception":case"system.exception":case"system.data.sqlclient.sqlexception":return l.hidePleaseWait(),window.toastr&&window.toastr.error(e.ExceptionMessage,e.Message),!0;default:e.Title=e.Message,e.Message=e.ExceptionMessage}if(null!=e.MessageType&&e.MessageType.toString())switch(e.MessageType.toString().toLowerCase()){case"success":case l.messageTypes.Success:window.toastr&&window.toastr.success(e.Message,e.Title);break;case"info":case l.messageTypes.Info:window.toastr&&window.toastr.info(e.Message,e.Title);break;case"warning":case l.messageTypes.Warning:window.toastr&&window.toastr.warning(e.Message,e.Title);break;case"danger":case l.messageTypes.Danger:window.toastr&&window.toastr.error(e.Message,e.Title);break;case"redirect":case l.messageTypes.Redirect:l.hidePleaseWait(),i(e.Title,e.Message,e.RedirectUrl);break;case"alert":case l.messageTypes.Alert:l.hidePleaseWait(),i(e.Title,e.Message)}}return!1;function i(e,a,t){window.bootbox?(e=window.bootbox.alert({title:e,message:a,callback:function(){t&&window.location.replace(t)}}),l.setModalOnTop(e)):(window.alert(a),t&&window.location.replace(t))}}function T(e,a,t){var i=null,i=new RegExp("application/json","i").test(e.getResponseHeader("content-type"))?s.parseJSON(e.responseText):{Message:e.status+" - "+a+": "+t,MessageType:l.messageTypes.Danger,Title:l.language.error};l.checkAjaxMessage(i,a,e),l.hidePleaseWait()}function x(e,a,i,t){function o(e,a,t){l.checkAjaxMessage(e)||"function"==typeof i&&i(e,a,t)}return"function"!=typeof t&&(t=T),e=e+(-1===e.indexOf("?")?"?":"&")+"__="+Number(new Date),(a?s.ajax({url:e,type:"GET",contentType:"application/json",data:JSON.stringify(a),cache:!1}):s.getJSON(e)).done(o).fail(t)}function k(e,a,i,t){function o(e,a,t){l.checkAjaxMessage(e)||"function"==typeof i&&i(e,a,t)}return void 0===t&&(t=T),e=e+(-1===e.indexOf("?")?"?":"&")+"__="+Number(new Date),(a?s.ajax({url:e,type:"POST",contentType:"application/json",data:JSON.stringify(a),cache:!1}):s.ajax({url:e,type:"POST",contentType:"application/json",cache:!1})).done(o).fail(t)}function M(t,i){var o=null;return function(){var e=this,a=arguments;clearTimeout(o),o=setTimeout(function(){t.apply(e,a)},i)}}function D(e,a){var t,i=[],o="",i=s("input:not([type=radio])",a).val("");for(t in i=s("select",a).val(""),i=s("textarea",a).val(""),i=s("input[type=checkbox]",a).val("1").prop("checked",!1),e)(i=(i=(i=s("input[name="+t+"]",a))[0]?i:s("select[name="+t+"]",a))[0]?i:s("textarea[name="+t+"]",a))[0]&&("checkbox"==i.prop("type")?(i.prop("checked",e[t]),i.data("origValue",i.val())):"radio"==i.prop("type")?(o=e[t]?e[t].toString():"",i.each(function(e,a){a=s(a);a.prop("checked",a.val()==o)})):(o=e[t]?e[t].toString():"",i.val(o.trim()),i.data("origValue",i.val())))}function z(e){s(e).each(function(e,a){try{var t=s(a).prop("id");s("#"+t).DataTable().draw(l.redrawDataTableType)}catch(e){}})}return s=s||window.jQuery,l.fireCallback=l.fireCallback||function(e){"function"==typeof e&&e()},i=e=function(){var e=a.libPaths||{};l.get=x,l.post=k,l.checkAjaxMessage=v,l.showPleaseWait=y,l.hidePleaseWait=m,l.baseUrl="",t=s('<div class="modal fade jlwPleaseWait" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" role="dialog"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-body"><div class="text-center"><button type="button" class="btn-close float-end" data-bs-dismiss="modal" aria-label="Close"></button><div class="h4"><span></span><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-info progress-bar-animated" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div></div></div></div></div></div></div></div>'),l.pleaseWaitDiv=t,l.language={pleaseWait:"Processing...",notAuthorizedTitle:"Not Logged In",notAuthorized:"Either you have not completely logged in or your session has expired. Please log in and try again.",error:"An error has occurred"},l.debounce=l.debounce||M,l.populateFormData=l.populateFormData||D,l.setModalOnTop=l.setModalOnTop||b,l.serializeFormToJson=l.serializeFormToJson||w,l.messageTypes=l.messageTypes||r,l.formatDateString=l.formatDateString||u,l.zeroPad=l.zeroPad||p,l.redrawDataTableType=l.redrawDataTableType||"full-hold",l.redrawDataTable=l.redrawDataTable||z,l.showNotification=l.showNotification||h,l.lazyLoadLibrary=l.lazyLoadLibrary||d,l.lazyLoadStyle=l.lazyLoadStyle||c,l.getHighestZIndex=l.getHighestZIndex||g,l.serializeMultipleFieldCallback=l.serializeMultipleFieldCallback||f,l.promiseInitBootstrap=l.lazyLoadLibrary(window.bootstrap&&window.bootstrap.Modal,e.Bootstrap),l.promiseInitFontAwesome=l.lazyLoadLibrary(window.FontAwesome,e.FontAwesome),l.promiseInitBootbox=l.lazyLoadLibrary(window.bootbox,e.Bootbox),l.promiseInitToastr=l.lazyLoadLibrary(window.toastr,e.Toastr),l.fireCallback(l.init),l.fireCallback(a.fnInit)},e=a.libPaths||{},void 0===s&&e.jQuery?(o=document.getElementsByTagName("head")[0],(n=document.createElement("script")).type="text/javascript",n.src=e.jQuery,n.onload=function(){s=window.jQuery,l.promiseInitJquery=s.Deferred().resolve(),l.fireCallback(i)},o.appendChild(n)):(void 0!==s&&(l.promiseInitJquery=s.Deferred().resolve()),l.fireCallback(i)),l}
