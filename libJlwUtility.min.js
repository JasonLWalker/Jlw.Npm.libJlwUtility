function libJlwUtility(n){function c(){var h=n.libPaths||{},c;t.pleaseWaitDiv=f;t.get=d;t.post=g;t.checkAjaxMessage=o;t.showPleaseWait=b;t.hidePleaseWait=i;t.debounce=nt;t.populateFormData=tt;t.setModalOnTop=s;t.serializeFormToJson=p;t.messageTypes=r;t.formatDateString=y;t.zeroPad=v;t.redrawDataTableType="full-hold";t.redrawDataTable=it;t.showNotification=k;t.lazyLoadLibrary=u;c=window.bootstrap&&window.bootstrap.modal;t.promiseInitBootstrap=u(c,h.Bootstrap);t.promiseInitFontAwesome=u(window.FontAwesome,h.FontAwesome);t.promiseInitBootstrap=u(window.bootbox,h.Bootbox);t.promiseInitToastr=u(window.toastr,h.Toastr);f=jQuery('<div class="modal fade jlwPleaseWait" data-backdrop="static" tabindex="-1" role="dialog"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-body"><div class="text-center"><div class="progress"><div class="progress-bar progress-bar-striped progress-bar-info progress-bar-animated" role="progressbar" aria-valuenow="45" aria-valuemin="0" aria-valuemax="100" style="width: 100%"><\/div><\/div><h4><span>Processing... <\/span> <button type="button" class="close" style="float: none;" data-dismiss="modal" aria-hidden="true"><small>x<\/small><\/button><\/h4><\/div><\/div><\/div><\/div><\/div>');e(t.init);e(n.fnInit)}function l(i){var u=n.libPaths||{},f,r;typeof jQuery=="undefined"&&u.jQuery?(f=document.getElementsByTagName("head")[0],r=document.createElement("script"),r.type="text/javascript",r.src=u.jQuery,r.onload=function(){t.promiseInitJquery=jQuery.Deferred().resolve();e(i)},f.appendChild(r)):(typeof jQuery!="undefined"&&(t.promiseInitJquery=jQuery.Deferred().resolve()),e(i))}function e(n){typeof n=="function"&&n()}function u(n,t){return n?jQuery.Deferred().resolve:typeof t=="string"?jQuery.getScript(t):jQuery.Deferred().fail()}function a(n){l(n)}function v(n,t){return t||(t="000000000"),n||(n=""),n=n.trim(),t.substring(0,t.length-n.length)+n}function y(n,t){var i="";t||(t="YYYY-MM-DD");try{i=n?moment(n).format(t):""}catch(r){}return i}function p(n){var t=jQuery("input, select, textarea",n),r,i;return t.each(function(n,t){var i=jQuery(t);i.data.jlwIsDisabled=i.prop("disabled");i.prop("disabled",!1)}),r=t.serializeArray(),i={},jQuery(r).each(function(n,t){i[t.name]=t.value}),t.each(function(n,t){var i=jQuery(t);i.prop("disabled",i.data.jlwIsDisabled)}),i}function w(n){var t=-999;return jQuery("*").each(function(){var r=jQuery(this),i=parseInt(r.css("z-index"),10);i&&t<i&&r!=n&&(t=i)}),t}function s(n){var t=w(n);try{n&&(n.data("bs.modal")._backdrop.css("z-index",t+1),n.css("z-index",t+2))}catch(i){}}function b(n){n==null&&(n="Processing...");jQuery("h4>span",f).html(n);var t=f.appendTo("body").modal("show");t.on("hidden.bs.modal",function(){window.setTimeout(function(){jQuery(".jlwPleaseWait").remove()},100)});s(t)}function i(){window.setTimeout(function(){jQuery(".jlwPleaseWait")[0]&&i()},500);jQuery(".jlwPleaseWait").modal("hide")}function k(n,t,r,u){function f(n,t,i){window.bootbox?bootbox.alert({title:n,message:t,callback:function(){i&&window.location.replace(i)}}):(window.alert(t),i&&window.location.replace(i))}r==null&&(r="info");r=r.toString().toLowerCase();switch(r){case"success":toastr.success(t,n);break;case"info":toastr.info(t,n);break;case"warning":toastr.warning(t,n);break;case"danger":toastr.warning(t,n);break;case"redirect":i();f(t,n);break;case"alert":i();f(t,n,u)}u&&r!="alert"&&window.setTimeout(function(){window.location.replace(u)},1500)}function o(n,t,u){function f(n,t,i){if(window.bootbox){var r=bootbox.alert({title:n,message:t,callback:function(){i&&window.location.replace(i)}});s(r)}else window.alert(t),i&&window.location.replace(i)}if(u&&u.status===401&&u.getResponseHeader){var e=u.getResponseHeader("location");if(e)return e=e.replace(/ReturnUrl=[\w\W]*$/i,"ReturnUrl="+encodeURIComponent(window.location.pathname)),f("Not Logged In","Either you have not completely logged in or your session has expired. Please log in and try again.",e),!1}if(!n||!n.ExceptionType&&!n.Message)return!1;if(n.ExceptionType)switch(n.ExceptionType.toLowerCase()){case"invalidloginexception":return i(),f("Not Logged In","Either you have not completely logged in or your session has expired. Please log in and try again.",baseUrl),!0;case"invalidtokenexception":return i(),f(n.Message,n.ExceptionMessage,baseUrl),!0;case"statusfailexception":case"statusinvalidinputexception":case"system.exception":case"system.data.sqlclient.sqlexception":return i(),toastr.error(n.ExceptionMessage,n.Message),!0;default:n.Title=n.Message;n.Message=n.ExceptionMessage}if(n.MessageType!=null&&n.MessageType.toString())switch(n.MessageType.toString().toLowerCase()){case"success":case r.Success:toastr.success(n.Message,n.Title);break;case"info":case r.Info:toastr.info(n.Message,n.Title);break;case"warning":case r.Warning:toastr.warning(n.Message,n.Title);break;case"danger":case r.Danger:toastr.error(n.Message,n.Title);break;case"redirect":case r.Redirect:i();f(n.Title,n.Message,n.RedirectUrl);break;case"alert":case r.Alert:i();f(n.Title,n.Message)}return!1}function h(n,t,u){var f=null,e=new RegExp("application/json","i");f=e.test(n.getResponseHeader("content-type"))?jQuery.parseJSON(n.responseText):{Message:n.status+" - "+t+": "+u,MessageType:r.Danger,Title:"An error has occurred"};o(f,t,n);i()}function d(n,t,i,r){function u(n,t,r){o(n)||typeof i=="function"&&i(n,t,r)}return typeof r!="function"&&(r=h),n=n+(-1===n.indexOf("?")?"?":"&")+"__="+Number(new Date),t?jQuery.ajax({url:n,type:"GET",contentType:"application/json",data:JSON.stringify(t),cache:!1}).done(u).fail(r):jQuery.getJSON(n).done(u).fail(r)}function g(n,t,i,r){function u(n,t,r){o(n)||typeof i=="function"&&i(n,t,r)}return typeof r=="undefined"&&(r=h),n=n+(-1===n.indexOf("?")?"?":"&")+"__="+Number(new Date),t?jQuery.ajax({url:n,type:"POST",contentType:"application/json",data:JSON.stringify(t),cache:!1}).done(u).fail(r):jQuery.ajax({url:n,type:"POST",contentType:"application/json",cache:!1}).done(u).fail(r)}function nt(n,t){var i=null;return function(){var r=this,u=arguments;clearTimeout(i);i=setTimeout(function(){n.apply(r,u)},t)}}function tt(n,t){var i=[],u="",r;i=jQuery("input:not([type=radio])",t).val("");i=jQuery("select",t).val("");i=jQuery("textarea",t).val("");i=jQuery("input[type=checkbox]",t).val("1").prop("checked",!1);for(r in n)i=jQuery("input[name="+r+"]",t),i[0]||(i=jQuery("select[name="+r+"]",t)),i[0]||(i=jQuery("textarea[name="+r+"]",t)),i[0]&&(i.prop("type")=="checkbox"?(i.prop("checked",n[r]),i.data("origValue",i.val())):(u=n[r]?n[r].toString():"",i.val(u.trim()),i.data("origValue",i.val())))}function it(n){jQuery(n).each(function(n,i){try{var r=jQuery(i).prop("id"),u=jQuery("#"+r).DataTable();u.draw(t.redrawDataTableType)}catch(f){}})}var f={},r={Success:"0",Warning:"1",Info:"2",Danger:"3",Alert:"4",Redirect:"5"},t=this;return n=n||{},a(c),t}